---
title: "Exploratory_data_analysis_R4DS"
author: "Noelí D'Alessio"
date: "5/4/2020"
output: html_document
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

#Exploratory Data Analysis

```{r}
library("tidyverse")
library("viridis")
library("nycflights13")
library("ggbeeswarm")
library("lvplot")
library("ggstance")
```

### 1. Explore the distribution of each of the x, y, and z variables in diamonds. What do you learn? Think about a diamond and how you might decide which dimension is the length, width, and depth.

x length in mm (0-10.74)
y width in mm (0-58.9)
z depth in mm (0-31.8)
```{r}
summary(select(diamonds, x, y, z))
```


```{r}
ggplot(data = diamonds) +
    geom_histogram(mapping = aes(x = x), binwidth = 0.01)
```

```{r}
ggplot(data = diamonds) +
    geom_histogram(mapping = aes(x = y), binwidth = 0.01)
```

```{r}
ggplot(data = diamonds) +
    geom_histogram(mapping = aes(x = z), binwidth = 0.01)
```

1. X is larger than Y, and Y is larger than Z. 
2. There are outliers in the 3 variables. 
3. They have a positive, right asimetry.
    this makes sense, there should be more "small diamonds" than larger. And can't be diamonds with 0 mm.
4. They have a multimodal distribution. 
    Related to the caract? Maybe there are some "cuts"?

Typical values of X go from 4.710 to 6.540.
Typical values of Y go from de 4.720 to 6.540.
Typical values of Z go from 2.910 to 4.040.
Es decir, los valores típicos de X e Y are larger than Z's values.

Otliers values: 0 and some are large values for X, Y, and Z. 

```{r}
filter(diamonds, x == 0 | y == 0 | z == 0)
```

0 values, missing values?

```{r}
diamonds %>% 
    arrange(desc(y)) %>% 
    head(20)
```
```{r}
diamonds %>% 
    arrange(desc(z)) %>% 
    head(20)
```
Also did the procedure, arranging descending order by using the X value but X didn't have any unusual value.

Others outliers:
Y= 58.90?, 31.80?
Z= 31.80?

To check the consistency of this values with other variables, we carry a scatter plots of each combination X, Y, Z. This shows outliers more clearly.

```{r}
ggplot(diamonds, aes(x = x, y = y)) +
  geom_point()
```
```{r}
ggplot(diamonds, aes(x = x, y = z)) +
    geom_point()
```

```{r}
ggplot(diamonds, aes(x = z, y = y))+
  geom_point()
```

To filter the outliers:
```{r}
filter(diamonds, x > 0, x < 10) %>% 
  ggplot() +
  geom_histogram(mapping = aes(x = x), binwidth = 0.01) +
  scale_x_continuous(breaks = 1:10)
```
```{r}
filter(diamonds, y > 0, y < 10) %>% 
    ggplot()+
    geom_histogram(mapping = aes(x = y), binwidth = 0.01) +
    scale_x_continuous(breaks = 1:10)
```

```{r}
filter(diamonds, z > 0, z < 10) %>% 
    ggplot()+
    geom_histogram(mapping = aes(x = z), binwidth = 0.01) +
    scale_x_continuous(breaks = 1:10)
```

### 2. Explore the distribution of price. Do you discover anything unusual or surprising? (Hint: Carefully think about the binwidth and make sure you try a wide range of values.)

```{r}
summary(select(diamonds, price))
```

```{r}
ggplot(data = diamonds) +
    geom_histogram(mapping = aes(x = price), binwidth = 100, center = 0)
```

Not much information in the previous graphic.

```{r}
ggplot(filter(diamonds, price < 2500), aes(x = price)) +
    geom_histogram(binwidth = 10, center = 0)
```
-Hay varios picos en la data pero no sé a qué corresponden.
-Hay un pico en la distribución en el precio de $750.
-No hay diamantes con un precio de $1500 (entre $1450 y $1550).

######Distribución del último dígito

```{r}
diamonds %>% 
    mutate(ending = price %% 10) %>% 
    ggplot(aes(x = ending)) +
    geom_histogram(binwidth = 1, center = 0)
```


```{r}
diamonds %>% 
    mutate(ending = price %% 100) %>% 
    ggplot(aes(x = ending)) +
    geom_histogram(binwidth = 1)
```

```{r}
diamonds %>% 
    mutate(ending = price %% 1000) %>% 
    filter(ending >= 500, ending <= 800) %>% 
  ggplot(aes(x = ending)) +
  geom_histogram(binwidth = 1)
```

### How many diamonds are 0.99 carat? How many are 1 carat? What do you think is the cause of the difference?

```{r}
diamonds %>% 
    filter(carat >= 0.99, carat <= 1) %>% 
    count(carat)
```

One reason could be the round up the carat to 1. 

```{r}
diamonds %>% 
    filter(carat >= 0.9, carat <= 1.1) %>% 
    count(carat) %>% 
    print(n = Inf)
```
There are not many diamonds with a carat between 0.93 and 0.99.










